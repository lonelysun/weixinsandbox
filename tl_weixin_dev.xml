<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="view_tl_weixin_template_form" model="ir.ui.view">
            <field name="name">微信模板表单</field>
            <field name="model">tl.weixin.template</field>
            <field name="arch" type="xml">
                <form string="微信模板表单">
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                        </div>
                        <div class="oe_title">
                            <label for="title" class="oe_edit_only"/>
                            <h1>
                                <field name="title" required="1"/>
                            </h1>
                        </div>
                        <group>
                            <group>
                                <field name="company_id" options="{'no_create': True,'no_open': True}"/>
                                <field name="app_id" options="{'no_create': True}"/>
                                <field name="template_id" attrs="{'readonly':1,'invisible':[('template_id','=',False)]}"/>
                                <field name="primary_industry"/>
                                <field name="deputy_industry"/>
                            </group>
                            <group>

                            </group>
                        </group>
                        <group>
                            <field name="content"/>
                            <field name="example"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_tl_weixin_template_tree" model="ir.ui.view">
            <field name="name">微信模板</field>
            <field name="model">tl.weixin.template</field>
            <field name="priority">1</field>
            <field name="arch" type="xml">
                <tree string="List Tree">
                    <field name="title"/>
                    <field name="company_id"/>
                    <field name="app_id"/>
                    <field name="template_id"/>
                </tree>
            </field>
        </record>

        <record id="action_tl_weixin_template" model="ir.actions.act_window">
            <field name="name">微信模板</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">tl.weixin.template</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_tl_weixin_template_tree"/>
            <field name="help" type="html">
                <p>
                    模板消息仅用于公众号向用户发送重要的服务通知，只能用于符合其要求的服务场景中，如信用卡刷卡通知，商品购买成功通知等。不支持广告等营销类消息以及其它所有可能对用户造成骚扰的消息。具体模板消息运营规则请读模板消息运营规范
                </p>
                <p>
                    关于使用规则，请注意：
                </p>
               <p>
                   1、所有服务号都可以在功能->添加功能插件处看到申请模板消息功能的入口，但只有认证后的服务号才可以申请模板消息的使用权限并获得该权限；
               </p>
               <p>
                   2、需要选择公众账号服务所处的2个行业，每月可更改1次所选行业；
               </p>
               <p>
                   3、在所选择行业的模板库中选用已有的模板进行调用；
               </p>
               <p>
                   4、每个账号可以同时使用25个模板。
               </p>
               <p>
                   5、当前每个账号的模板消息的日调用上限为10万次，单个模板没有特殊限制。【2014年11月18日将接口调用频率从默认的日1万次提升为日10万次，可在MP登录后的开发者中心查看】。当账号粉丝数超过10W/100W/1000W时，模板消息的日调用上限会相应提升，以公众号MP后台开发者中心页面中标明的数字为准。
               </p>
            </field>
        </record>



        <!--行业代码-->
        <record id="view_tl_weixin_industry_form" model="ir.ui.view">
            <field name="name">微信行业表单</field>
            <field name="model">tl.weixin.industry</field>
            <field name="arch" type="xml">
                <form string="微信行业表单">
                    <sheet>
                        <group>
                            <group>
                                <field name="name"/>
                                <field name="code"/>
                            </group>
                            <group>
                                <field name="parent_id"/>
                            </group>
                        </group>

                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_tl_weixin_industry_tree" model="ir.ui.view">
            <field name="name">微信行业</field>
            <field name="model">tl.weixin.industry</field>
            <field name="priority">1</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="name"/>
                    <field name="code"/>
                    <field name="parent_id"/>
                </tree>
            </field>
        </record>

        <record id="action_tl_weixin_industry" model="ir.actions.act_window">
            <field name="name">微信行业代码</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">tl.weixin.industry</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_tl_weixin_industry_tree"/>

        </record>



        <!--微信模板消息-->
        <record id="view_tl_weixin_message_form" model="ir.ui.view">
            <field name="name">微信消息表单</field>
            <field name="model">tl.weixin.message</field>
            <field name="arch" type="xml">
                <form string="微信消息表单">
                    <header>
						<button name="send_message_button" style="float:left;" string="发送信息"
							states="draft,faild" type="object" class="oe_highlight" />
						<field name="state" widget="statusbar" statusbar_visible="draft,send,failed,cancel" />
					</header>

                    <sheet>

                        <group>
                            <group>
                                <field name="template_id" options="{'no_create': True,'no_open': True}"/>
                                <field name="app_id" options="{'no_create': True,'no_open': True}"/>
                                <field name="template_content" readonly="1"/>
                                <field name="url"/>
                            </group>
                            <group>
                            </group>
                        </group>
                        <!--<separator style="font-size:13px;" colspan="4"-->
                                   <!--string="注意: 如果不选择'发送的用户'将会默认发送给所有用户"/>-->
                        <notebook>
						    <page string="模板参数">
						        <field name="params_ids">
						            <form>
						                <group>
						                    <field name="params_key"  required="1"/>
						                    <field name="params_value" required="1"/>
						                </group>
						            </form>
						            <tree editable='bottom'>
						                <field name="params_key" required="1"/>
						                <field name="params_value" required="1" />
						            </tree>
						        </field>
						    </page>
                            <page string="发送的用户">
						        <field name="user_ids">
                                    <form>
                                        <group>
                                            <field name="name"/>
                                            <field name="realname"/>
                                            <field name="phone"/>
                                        </group>
                                    </form>
                                    <tree>
                                        <field name="name"/>
                                        <field name="realname"/>
                                        <field name="phone"/>
                                    </tree>
                                </field>
						    </page>
						</notebook>
                        <group>
                            <field name="actual_content" readonly="1"/>
                            <field name="template_example" readonly="1" attrs="{'invisible':[('state','!=','draft')]}"/>

                            <!--发送消息结果-->
                            <field name="result_ids" string="发送的消息返回的结果"
                                   attrs="{'invisible':[('state','=','draft')]}">
                                    <form>
                                        <group>
                                            <field name="user_id"/>
                                            <field name="msgid"/>
                                            <field name="errmsg"/>
                                            <field name="errcode"/>
                                        </group>
                                    </form>
                                    <tree>
                                        <field name="user_id"/>
                                        <field name="msgid"/>
                                        <field name="errmsg"/>
                                        <field name="errcode"/>
                                    </tree>
                                </field>

                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_tl_weixin_message_tree" model="ir.ui.view">
            <field name="name">微信消息</field>
            <field name="model">tl.weixin.message</field>
            <field name="priority">1</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="company_id"/>
                    <field name="template_id"/>
                    <field name="user_ids"/>
                    <field name="create_date" string="创建时间"/>
                </tree>
            </field>
        </record>

        <record id="action_tl_weixin_message" model="ir.actions.act_window">
            <field name="name">微信消息</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">tl.weixin.message</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_tl_weixin_message_tree"/>
            <field name="help" type="html">
                <p>
                    模板消息仅用于公众号向用户发送重要的服务通知，只能用于符合其要求的服务场景中，如信用卡刷卡通知，商品购买成功通知等。不支持广告等营销类消息以及其它所有可能对用户造成骚扰的消息。具体模板消息运营规则请读模板消息运营规范
                </p>
                <p>
                    关于使用规则，请注意：
                </p>
               <p>
                   1、所有服务号都可以在功能->添加功能插件处看到申请模板消息功能的入口，但只有认证后的服务号才可以申请模板消息的使用权限并获得该权限；
               </p>
               <p>
                   2、需要选择公众账号服务所处的2个行业，每月可更改1次所选行业；
               </p>
               <p>
                   3、在所选择行业的模板库中选用已有的模板进行调用；
               </p>
               <p>
                   4、每个账号可以同时使用25个模板。
               </p>
               <p>
                   5、当前每个账号的模板消息的日调用上限为10万次，单个模板没有特殊限制。【2014年11月18日将接口调用频率从默认的日1万次提升为日10万次，可在MP登录后的开发者中心查看】。当账号粉丝数超过10W/100W/1000W时，模板消息的日调用上限会相应提升，以公众号MP后台开发者中心页面中标明的数字为准。
               </p>
            </field>
        </record>



        <!--用户组-->
        <record id="view_tl_weixin_users_groups_form" model="ir.ui.view">
            <field name="name">微信关注者用户组表单</field>
            <field name="model">tl.weixin.users.groups</field>
            <field name="arch" type="xml">
                <form string="微信关注者用户组">
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                        </div>
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only"/>
                            <h1>
                                <field name="name" required="1"/>
                            </h1>
                        </div>

                        <group>
                            <group>

                                <field name="app_id" options="{'no_create': True,'no_open': True}"/>
                                <field name="company_id" options="{'no_create': True,'no_open': True}"
                                        groups="base.group_multi_company" />
                                <!--<field name="groupid" readonly="1"/>-->
                                <!--<field name="users_count" readonly="1"/>-->
                            </group>
                            <group>
                            </group>
                        </group>
                        <notebook>
                            <page string="该组的用户">
						        <field name="user_ids">
                                    <form>
                                        <group>
                                            <field name="name"/>
                                            <field name="realname"/>
                                            <field name="phone"/>
                                        </group>
                                    </form>
                                    <tree>
                                        <field name="name"/>
                                        <field name="realname"/>
                                        <field name="phone"/>
                                    </tree>
                                </field>
						    </page>
						</notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_tl_weixin_users_groups_tree" model="ir.ui.view">
            <field name="name">微信关注者用户组</field>
            <field name="model">tl.weixin.users.groups</field>
            <field name="priority">1</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="company_id" groups="base.group_multi_company"/>
                    <field name="app_id"/>
                    <field name="name"/>
                    <!--<field name="groupid"/>-->
                    <!--<field name="users_count"/>-->

                </tree>
            </field>
        </record>

        <record id="action_tl_weixin_users_groups" model="ir.actions.act_window">
            <field name="name">微信关注者用户组</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">tl.weixin.users.groups</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_tl_weixin_users_groups_tree"/>
            <field name="help">微信关注者用户组</field>
        </record>


        <!--移动用户到组的向导-->
        <record id="wizard_view_tl_weixin_users_groups_form" model="ir.ui.view">
            <field name="name">修改用户组</field>
            <field name="model">tl.weixin.users.groups.wizard</field>
            <field name="arch" type="xml">
                <form string="修改用户组">
                    <group>
                        <field name="user_ids" options="{'no_create': True,'no_open': True}"/>
                        <field name="groups_id" options="{'no_create': True}"/>
                    </group>
                    <footer>
                        <button string="确认" name="change_users_groups_button" type="object" class="btn-primary"/>
                        <button string="取消" class="btn-default" special="cancel" />
                    </footer>
                </form>
            </field>
        </record>
        <record id="view_tl_weixin_users_groups_groups_tree" model="ir.ui.view">
            <field name="name">修改用户组</field>
            <field name="model">tl.weixin.users.groups.wizard</field>
            <field name="arch" type="xml">
                <tree string="Users" editable="false" >
                    <field name="user_ids"/>
                    <field name="groups_id"/>
                </tree>
            </field>
        </record>
        <act_window id="wizard_tl_weixin_users_groups_action"
            name="修改用户组"
            src_model="tl.weixin.users"
            res_model="tl.weixin.users.groups.wizard"
            view_type="form" view_mode="form"
            key2="client_action_multi" target="new"/>




        <menuitem name="模板" id="menu_tl_weixin_template" action="action_tl_weixin_template"
                  parent="menu_tl_weixin_setting_root" sequence="4"/>

        <menuitem name="行业代码" id="menu_tl_weixin_industry" action="action_tl_weixin_industry"
                  parent="menu_tl_weixin_setting_root" sequence="5"/>

        <menuitem name="模板信息" id="menu_tl_weixin_message" action="action_tl_weixin_message"
                  parent="menu_tl_weixin_setting_root" sequence="６"/>

        <menuitem name="组" id="menu_tl_weixin_users_groups" action="action_tl_weixin_users_groups"
                  parent="menu_tl_weixin_users_root" sequence="3"/>

    </data>
</openerp>